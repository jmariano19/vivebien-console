@import url('https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --chamomile-steam: #F5F0E8;
  --barro-cocido: #C4613A;
  --barro-hover: #A84E2E;
  --sancocho-gold: #E8B84A;
  --deep-ebano: #3D2E1E;
}

* {
  box-sizing: border-box;
}

body {
  font-family: 'Outfit', system-ui, sans-serif;
  background: linear-gradient(135deg, #F5F0E8 0%, #FAF8F5 50%, #F5F0E8 100%);
  min-height: 100vh;
  color: #3D2E1E;
  -webkit-font-smoothing: antialiased;
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Lora', Georgia, serif;
}

/* Mobile touch improvements */
@media (max-width: 768px) {
  button, a, input, select {
    min-height: 44px;
  }
  
  body {
    font-size: 16px;
  }
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #F5F0E8;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #C4B4A4;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #A89484;
}

/* Hide scrollbar on mobile */
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@layer components {
  .btn-primary {
    @apply bg-barro text-white font-body font-semibold uppercase tracking-wide px-4 py-3 rounded-lg transition-all duration-200 text-sm md:text-base md:px-6;
  }
  
  .btn-primary:hover {
    @apply bg-barro-hover shadow-elevated;
  }
  
  .btn-secondary {
    @apply bg-transparent text-barro border-2 border-barro font-body font-semibold uppercase tracking-wide px-4 py-3 rounded-lg transition-all duration-200 text-sm md:text-base md:px-6;
  }
  
  .btn-secondary:hover {
    @apply bg-barro bg-opacity-10;
  }

  .card {
    @apply bg-white rounded-2xl shadow-card p-4 md:p-6;
  }
  
  .card-sanctuary {
    @apply bg-chamomile border border-ebano/10 rounded-2xl p-4 md:p-6;
  }
  
  .input-field {
    @apply w-full px-3 py-3 border-2 border-ebano/20 rounded-lg bg-white font-body text-text-primary transition-all duration-200 focus:outline-none focus:border-barro text-base;
  }
  
  .sello-confianza {
    @apply inline-flex items-center gap-1.5 px-2 py-1 bg-barro text-white rounded-full text-xs md:text-sm font-medium md:gap-2 md:px-3;
  }

  .stat-card {
    @apply bg-white rounded-xl p-4 md:p-5 shadow-card border border-ebano/5 transition-all duration-300 hover:shadow-elevated;
  }

  .tab-container {
    @apply flex gap-1 overflow-x-auto pb-2 hide-scrollbar -mx-4 px-4 md:mx-0 md:px-0 md:overflow-visible;
  }

  .tab-button {
    @apply flex-shrink-0 px-3 py-2 font-body font-medium text-text-secondary transition-all duration-200 border-b-2 border-transparent text-sm md:text-base md:px-4;
    white-space: nowrap;
  }
  
  .tab-button.active {
    @apply text-barro border-barro;
  }
  
  .tab-button:hover:not(.active) {
    @apply text-text-primary;
  }

  .patient-card {
    @apply card hover:shadow-elevated transition-all duration-200;
  }

  .bubble-user {
    @apply bg-barro text-white rounded-2xl rounded-br-sm px-3 py-2 max-w-[85%] md:max-w-[75%] ml-auto text-sm md:text-base;
  }

  .bubble-assistant {
    @apply bg-chamomile text-ebano rounded-2xl rounded-bl-sm px-3 py-2 max-w-[85%] md:max-w-[75%] text-sm md:text-base;
  }

  /* WhatsApp-style Chat */
  .whatsapp-chat-container {
    @apply rounded-xl overflow-hidden shadow-lg border border-gray-200;
    background: #e5ddd5;
  }

  .whatsapp-header {
    @apply px-4 py-3;
    background: linear-gradient(180deg, #075E54 0%, #128C7E 100%);
  }

  .whatsapp-messages-area {
    min-height: 400px;
    max-height: 60vh;
    background-color: #e5ddd5;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ccc5ba' fill-opacity='0.3'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }

  .whatsapp-messages-scroll {
    @apply p-4 overflow-y-auto;
    max-height: calc(60vh - 80px);
  }

  .whatsapp-message-row {
    @apply flex mb-2;
    animation: messageSlideIn 0.3s ease-out forwards;
  }

  .whatsapp-bubble-user {
    @apply relative px-3 py-2 rounded-lg shadow-sm;
    background: #dcf8c6;
    max-width: 85%;
    border-top-right-radius: 0;
  }

  .whatsapp-bubble-assistant {
    @apply relative px-3 py-2 rounded-lg shadow-sm;
    background: white;
    max-width: 85%;
    border-top-left-radius: 0;
  }

  .whatsapp-tail-user {
    @apply absolute top-0 -right-2;
    width: 0;
    height: 0;
    border-left: 8px solid #dcf8c6;
    border-top: 8px solid transparent;
  }

  .whatsapp-tail-assistant {
    @apply absolute top-0 -left-2;
    width: 0;
    height: 0;
    border-right: 8px solid white;
    border-top: 8px solid transparent;
  }

  .whatsapp-date-badge {
    @apply px-3 py-1 rounded-lg text-xs shadow-sm;
    background: rgba(225, 219, 211, 0.95);
    color: #54656f;
  }

  .whatsapp-input-area {
    @apply px-4 py-3 bg-gray-100 border-t border-gray-200 flex items-center justify-center;
  }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes messageSlideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes pulse-soft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out forwards;
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out forwards;
}

.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}

.stagger-children > * {
  animation: fadeIn 0.4s ease-out forwards;
  opacity: 0;
}

.stagger-children > *:nth-child(1) { animation-delay: 0.05s; }
.stagger-children > *:nth-child(2) { animation-delay: 0.1s; }
.stagger-children > *:nth-child(3) { animation-delay: 0.15s; }
.stagger-children > *:nth-child(4) { animation-delay: 0.2s; }
.stagger-children > *:nth-child(5) { animation-delay: 0.25s; }

/* Mobile menu */
.mobile-menu-overlay {
  @apply fixed inset-0 bg-black/50 z-40 md:hidden;
}

.mobile-menu {
  @apply fixed top-0 right-0 h-full w-64 bg-white shadow-xl z-50 transform transition-transform duration-300 md:hidden;
}

.mobile-menu.closed {
  transform: translateX(100%);
}

.mobile-menu.open {
  transform: translateX(0);
}

/* Safe area padding for iOS */
@supports (padding: max(0px)) {
  .safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
}
